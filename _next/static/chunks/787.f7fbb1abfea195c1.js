"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[787],{66787:(e,t,i)=>{i.r(t),i.d(t,{default:()=>x});var h=i(95155),n=i(12115),r=i(13199);let d=(e,t,i,h,n)=>{let r=Math.sqrt(i*i+h*h);return{x:e+r*Math.cos(n+=Math.atan2(h,i)),y:t+r*Math.sin(n)}},w=e=>{let{x:t,y:i,width:h,height:n}=e,r=e.rotation,w=d(t,i,0,0,r),a=d(t,i,h,0,r),x=d(t,i,h,n,r),l=d(t,i,0,n,r),s=Math.min(w.x,a.x,x.x,l.x),o=Math.min(w.y,a.y,x.y,l.y);return{x:s,y:o,width:Math.max(w.x,a.x,x.x,l.x)-s,height:Math.max(w.y,a.y,x.y,l.y)-o}},a=e=>{let t=1/0,i=1/0,h=-1/0,n=-1/0;return e.forEach(e=>{t=Math.min(t,e.x),i=Math.min(i,e.y),h=Math.max(h,e.x+e.width),n=Math.max(n,e.y+e.height)}),{x:t,y:i,width:h-t,height:n-i}},x=()=>{let[e,t]=(0,n.useState)({width:window.innerWidth,height:window.innerHeight}),[i,d]=(0,n.useState)([{id:"rect1",x:window.innerWidth/2-60,y:window.innerHeight/2-60,width:50,height:50,fill:"red"},{id:"rect2",x:window.innerWidth/2+10,y:window.innerHeight/2+10,width:50,height:50,fill:"green"}]),x=(0,n.useRef)(new Map),l=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(l.current){let e=i.map(e=>x.current.get(e.id));l.current.nodes(e),console.log("nodes",e)}},[i]),(0,n.useEffect)(()=>{let e=()=>{t({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,h.jsx)(r.BI,{width:e.width,height:e.height,children:(0,h.jsxs)(r.Wd,{children:[i.map(e=>(0,h.jsx)(r.rw,{ref:t=>{t&&x.current.set(e.id,t)},x:e.x,y:e.y,width:e.width,height:e.height,fill:e.fill,draggable:!0},e.id)),(0,h.jsx)(r.Ge,{ref:l,boundBoxFunc:(t,i)=>{let h=w(i);return h.x<0||h.y<0||h.x+h.width>e.width||h.y+h.height>e.height?t:i},onDragMove:t=>{if(!l.current)return;let i=l.current.nodes();if(0===i.length)return;let h=a(i.map(e=>e.getClientRect()));i.forEach(t=>{let i=t.getAbsolutePosition(),n=h.x-i.x,r=h.y-i.y,d={...i};h.x<0&&(d.x=-n),h.y<0&&(d.y=-r),h.x+h.width>e.width&&(d.x=e.width-h.width-n),h.y+h.height>e.height&&(d.y=e.height-h.height-r),t.setAbsolutePosition(d)})}})]})})}}}]);