"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[640],{14640:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var i=n(95155),s=n(12115),a=n(13199),r=n(37903),l=n(20450),d=n.n(l);let o=window.innerWidth,h=window.innerHeight,c=e=>{let{src:t,shapeProps:n,isSelected:r,onSelect:l,onChange:o}=e,[h]=d()(t,"anonymous"),c=(0,s.useRef)(),u=(0,s.useRef)();return(0,s.useEffect)(()=>{r&&u.current.nodes([c.current])},[r]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a._V,{image:h,onClick:l,onTap:l,ref:c,...n,draggable:r,onDragEnd:e=>{o({...n,x:e.target.x(),y:e.target.y()})},onTransformEnd:e=>{let t=c.current,i=t.scaleX(),s=t.scaleY();t.scaleX(1),t.scaleY(1),o({...n,x:t.x(),y:t.y(),width:Math.max(5,t.width()*i),height:Math.max(t.height()*s)})}}),r&&(0,i.jsx)(a.Ge,{ref:u,flipEnabled:!1,boundBoxFunc:(e,t)=>5>Math.abs(t.width)||5>Math.abs(t.height)?e:t})]})},u=()=>{let e=(0,s.useRef)(null),[t,n]=(0,s.useState)([]),[l,d]=(0,s.useState)(null),[u,g]=(0,s.useState)("#000"),x=async e=>{var i=(window.webkitURL||window.URL).createObjectURL(e.target.files[0]);new Promise(()=>{let e=new window.Image;e.src=i,e.onload=()=>{let{width:s,height:a,...r}=e,l={width:s,height:a};n([...t,{url:i,id:Math.floor(9999*Math.random())+1,x:s/2/2,y:s/2/2,width:l.width,height:l.height}])}})},w=e=>{e.target===e.target.getStage()&&d(null)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{display:"flex",position:"absolute",zIndex:"999"},children:[(0,i.jsx)(r.Xq,{color:u,onChange:t=>{e.current.container().style.backgroundColor=t.hex,g(t)}}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:"로컬에서 이미지 불러와 편집"}),(0,i.jsx)("div",{children:(0,i.jsx)("input",{type:"file",id:"file_input",onChange:x})}),(0,i.jsx)("div",{id:"canvas-container"})]})]}),(0,i.jsx)(a.BI,{width:o,height:h,ref:e,onMouseDown:w,onTouchStart:w,children:(0,i.jsx)(a.Wd,{children:t.map((e,s)=>(0,i.jsx)(c,{src:e.url,shapeProps:e,isSelected:e.id===l,onSelect:()=>{d(e.id)},onChange:e=>{let i=t.slice();i[s]=e,n(i),console.log("rects",i)}},s))})})]})}}}]);